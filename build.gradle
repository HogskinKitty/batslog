plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '1.2.0'
}

group 'cn.com.pism'
version(("${CUSTOM_VERSION}" ? "${CUSTOM_VERSION}" : new Date().format("yy.MM.dd.HHmm")) + "-${PUBLISH}")

buildSearchableOptions.enabled = false


sourceCompatibility = JavaVersion.VERSION_1_8


allprojects {
    repositories {
        maven {
            url 'https://maven.aliyun.com/repository/public/'
        }
        mavenLocal()
        mavenCentral()
    }
}


repositories {
    mavenCentral()
}

dependencies {
    testImplementation group: 'junit', name: 'junit', version: '4.13.2'

    implementation 'com.alibaba.fastjson2:fastjson2:2.0.22'
    implementation 'com.alibaba:druid:1.2.15'
    implementation 'cn.hutool:hutool-http:5.8.11'
    implementation 'org.apache.commons:commons-lang3:3.12.0'
    implementation 'org.apache.commons:commons-collections4:4.4'
    implementation 'org.slf4j:slf4j-api:2.0.5'
    compileOnly 'org.projectlombok:lombok:1.18.24'
    testCompileOnly 'org.projectlombok:lombok:1.18.24'
    annotationProcessor 'org.projectlombok:lombok:1.18.24'
    testAnnotationProcessor 'org.projectlombok:lombok:1.18.24'
}

// See https://github.com/JetBrains/gradle-intellij-plugin/
intellij {
    version = '2019.2'
    type = 'IU'
    plugins = [
            'com.intellij.database'
    ]
}
patchPluginXml {
    sinceBuild = '192'
    untilBuild = '232.*'
}

runPluginVerifier {
    downloadDir = 'D:\\project\\.pluginVerifier'
}

tasks.withType(JavaCompile).configureEach {
    options.encoding = "UTF-8"
}